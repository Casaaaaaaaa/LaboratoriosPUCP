{% extends 'internal/base_internal.html' %}

{% block title %}{{ super() }} | Inicio{% endblock title %}

{% block custom_css %}

{% endblock custom_css %}

{% block page_content %}

<div class="row border-bottom white-bg dashboard-header">
    <div class="col-md-3">
        <h2><strong>Crear Laboratorio</strong></h2>
    </div>
</div>

<form action="{{ url('internal:laboratory.create') }}" method="post">
  {% csrf_token %}
  <div class="col-md-offset-2" style="width: 700px">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>Datos Generales </h5>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div class="col-sm-6 b-r">

              <div class="form-group">
                <label>Nombre de Laboratorio (*)</label>
                <input type="text" name="textname" required placeholder="Ingrese Nombre de Laboratorio" class="form-control">
                <span>Ejemplo: Laboratorio de Corrosión</span>
              </div>
              <div class="form-group">
                <label>Cantidad de Usuarios (*)</label>
                <input type="number" name="numberUsers" required min="5" max="15" class="form-control">
                <span>Cantidad mínima es cinco (5), cantidad máxima es quince (15)</span>
              </div>

          </div>
          <div class="col-sm-6 b-r">

              <div class="form-group">
                <label>Tipo de Laboratorio (*)</label>
                <select class="form-control m-b" name="comboBox_type">
                  {% for lab_type in types %}
                    {% if lab_type.active == True %}
                      <option>{{ lab_type.name }}</option>
                    {% endif %}
                  {% endfor %}
                </select>
                <span>Seleccione un tipo de laboratorio</span>
              </div>
          </div>
        </div>
        <p><strong>(*)</strong> campos obligatorios</p>
      </div>
    </div>
  </div>

<form action="{{ url('internal:laboratory.create') }}" method="post">
  {% csrf_token %}
  <div class="col-md-offset-2" style="width: 700px">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>Datos Generales </h5>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div class="col-sm-6 b-r">
              <div class="form-group">
                <label>Nombre de Laboratorio (*)</label>
                <input type="text" name="textname" required placeholder="Ingrese Nombre de Laboratorio" class="form-control">
                <span>Ejemplo: Laboratorio de Corrosión</span>
              </div>
              <div class="form-group">
                <label>Cantidad de Usuarios (*)</label>
                <input type="number" name="numberUsers" required min="5" max="15" class="form-control">
                <span>Cantidad mínima es cinco (5), cantidad máxima es quince (15)</span>
              </div>

          </div>
          <div class="col-sm-6 b-r">

              <div class="form-group">
                <label>Tipo de Laboratorio (*)</label>
                <select class="form-control m-b" name="comboBox_type">
                  {% for lab_type in types %}
                    {% if lab_type.active == True %}
                      <option>{{ lab_type.name }}</option>
                    {% endif %}
                  {% endfor %}
                </select>
                <span>Seleccione un tipo de laboratorio</span>
              </div>
          </div>
        </div>
        <p><strong>(*)</strong> campos obligatorios</p>
      </div>
    </div>
  </div>

  <div class="col-md-offset-1">
    <div class="ibox float-e-margins">
      <div class="form-inline">
        <div class="form-group">
          <div class="ibox-title">
            <h5>Personal disponible para este Laboratorio </h5>
          </div>
          <div class="ibox-content" style="height: 300px; width: 480px;">
            <div style="padding-bottom: 10px;">
              <label>Buscar Personal </label><br>
              <input type="text" class="form-control input-sm" id="searchTextTable1" onkeyup="searchInTable1()" placeholder="Nombre de Personal">
            </div>
            <div class="table-responsive" style="overflow: auto; max-height: 180px;">
            <table class="table table-striped" id="avaibleUsersTable">
              <thead>
                <tr>
                  <th>PK</th>
                  <th>Nombre</th>
                  <th>Apellidos</th>
                  <th>Fecha Inicio</th>
                  <th>Agregar a Laboratorio</th>
                </tr>
              </thead>
              <tbody id="in_put">
                  <tr>
                    <th class="1_1" scope="row">1</th>
                    <td class="2_1">First Name1</td>
                    <td class="3_1">Last Name1</td>
                    <td class="4_1">12/12/12</td>
                    <td><i onclick="move_items(1)" class="5_1 fa fa-arrow-right"></i></td>
                  </tr>

                  <tr>
                    <th class="1_2" scope="row">2</th>
                    <td class="2_2">First Name2</td>
                    <td class="3_2">Last Name2</td>
                    <td class="4_2">12/12/12</td>
                    <td><i onclick="move_items(2)" class="5_2 fa fa-arrow-right"></i></td>
                  </tr>

                  <tr>
                    <th class="1_3" scope="row">2</th>
                    <td class="2_3">First Name2</td>
                    <td class="3_3">Last Name2</td>
                    <td class="4_3">12/12/12</td>
                    <td><i onclick="move_items(3)" class="5_3 fa fa-arrow-right"></i></td>
                  </tr>


                {% for user in users : %}
                  <tr class="0_{{ user.pk }}">
                    <th class="1_{{ user.pk }}" scope="row">{{ user.pk }}</th>
                    <td class="2_{{ user.pk }}">{{ user.first_name }}</td>
                    <td class="3_{{ user.pk }}">{{ user.last_name }}</td>
                    <td class="4_{{ user.pk }}">12/12/12</td>
                    <td><i onclick="move_items({{ user.pk }})" class="5_{{ user.pk }} fa fa-arrow-right"></i></td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="ibox-title">
            <h5>Personal añadido a este Laboratorio </h5>
          </div>
          <div class="ibox-content" style="height: 300px; width: 480px;">
            <div style="padding-bottom: 10px;">
              <label>Buscar Personal </label><br>
              <input type="text" class="form-control input-sm" id="searchTextTable2" onkeyup="searchInTable2()" placeholder="Nombre de Personal">
            </div>
            <div class="table-responsive" style="overflow: auto; max-height: 180px;">
            <table class="table table-striped" id="addedUsersTable">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Nombre</th>
                  <th>Apellidos</th>
                  <th>Fecha Inicio</th>
                  <th>Quitar de Laboratorio</th>
                </tr>
              </thead>
              <tbody id="out_put">

              </tbody>
            </table>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="col-md-offset-0">
    <div class="ibox float-e-margins">
      <div class="ibox-content form-group form-inline">
        <div class="col-md-offset-5">
          <button type="submit" id="createButton" class="btn btn-w-m btn-success"> Registrar</button>
          <button type="button" id="cancelButton" class="btn btn-w-m btn-white"> Cancelar</button>
        </div>
      </div>
    </div>
  </div>
</form>
{% endblock page_content %}

{% block custom_js %}
<script>
  function searchInTable1() {
          var input, filter, table, tr, td, i;
          input = document.getElementById("searchTextTable1");
          filter = input.value.toUpperCase();
          table = document.getElementById("avaibleUsersTable");
          tr = table.getElementsByTagName("tr");
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if (td) {
              if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
              } else {
                  tr[i].style.display = "none";
              }
            }
          }
        }
</script>
<script>
  function searchInTable2() {
          var input, filter, table, tr, td, i;
          input = document.getElementById("searchTextTable2");
          filter = input.value.toUpperCase();
          table = document.getElementById("addedUsersTable");
          tr = table.getElementsByTagName("tr");
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if (td) {
              if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
              } else {
                  tr[i].style.display = "none";
              }
            }
          }
        }
</script>
<script type="text/javascript"></script>
<script>
  function move_data(){
    $("button").click(function(){
        $("p").clone().appendTo("body");
    });
  }
</script>
<script type="text/javascript">
    function move_items(id){
      $("#out_put").append("<tr>");
      $(".1_"+id).appendTo("#out_put");
      $(".2_"+id).appendTo("#out_put");
      $(".3_"+id).appendTo("#out_put");
      $(".4_"+id).appendTo("#out_put");
      $("#out_put").append("<td><i onclick='return_items(id)' class='fa fa-arrow-left'></i></td>");
      $("#out_put").append("</tr>");
      $(".0_"+id).hide(); // Hide move button
      $(".5_"+id).hide();
    }
</script>
<script type="text/javascript">
    function return_items(id){
      $("#in_put").append("<tr><td>sdjk</td></tr>");
    }
</script>
<script type="text/javascript">
  var fill_Toastr = function(pMsg, pTypeMsg,pTitle){
    toastr.options = {
    closeButton: true,
    progressBar: true,
    showMethod: 'slideDown',
    positionClass: "toast-bottom-right",
    timeOut: 4000
    };

    switch(pTypeMsg){
      case "success":
      toastr.success(pMsg, '',pTitle);
      break;

      case "error":
      toastr.error(pMsg, '',pTitle);
      break;
    }
  }

  function check_create(){
    fill_Toastr("djkfvsd",'success','');
  }
</script>
{% endblock custom_js %}
